window.Sticksy=function(){"use strict";var o="static",i="fixed",n="stuck",e=[];function s(t,i){if(!t)throw new Error("You have to specify the target element");if("string"!=typeof t&&!(t instanceof Element))throw new Error("Expected a string or element, but got: "+Object.prototype.toString.call(t));var n=h.findElement(t);if(!n)throw new Error("Cannot find target element: "+t);var o=n.parentNode;if(!o)throw new Error("Cannot find container of target element: "+t);i=i||{},this.t={containerEl:o,targetEl:n,topSpacing:i.topSpacing||0,listen:i.listen||!1},this.onStateChanged=null,e.push(this),this.i(this.t)}s.prototype.i=function(){var i=this;this.state=o,this.o=[],this.s=[];for(var t=this.t.targetEl;t;){var n=t.cloneNode(!0);n.style.visibility="hidden",n.className+=" sticksy-dummy-node",n.removeAttribute("id"),this.t.targetEl.parentNode.insertBefore(n,this.t.targetEl),this.o.push(t),this.s.push(n),t=t.nextElementSibling}(this.h=0,this.u={top:0,bottom:0},this.t.containerEl.style.position="relative",this.l=-1===getComputedStyle(this.t.containerEl).display.indexOf("flex"),this.hardRefresh(),this.t.listen)&&new MutationObserver(function(t){t.forEach(function(t){-1!==i.s.indexOf(t.target)&&"style"===t.attributeName||-1!==i.o.indexOf(t.target)&&"style"===t.attributeName||i.hardRefresh()})}).observe(this.t.containerEl,{attributes:!0,characterData:!0,childList:!0,subtree:!0})},s.prototype.m=function(t){return t<this.u.top?o:t>=this.u.bottom?n:i},s.prototype.v=function(){this.h=h.getComputedBox(this.o[this.o.length-1]).bottomWithMargin-h.getComputedBox(this.o[0]).topWithMargin},s.prototype.p=function(){var t=this.t.containerEl,i=this.o,n=h.getComputedBox(t),o=h.getComputedBox(i[0]);this.u={top:o.topWithMargin-this.t.topSpacing,bottom:n.bottom-n.paddingBottom-this.t.topSpacing-this.h}},s.prototype.refresh=function(){var t=this.m(window.pageYOffset,this.u);t!==this.state&&(t===o?(this.g(this.o),this.C(this.s)):(this.S(this.o),t===i?this.M(this.o):this.j(this.o),this.k(this.s)),this.state=t,"function"==typeof this.onStateChanged&&this.onStateChanged(t))},s.prototype.hardRefresh=function(){this.state=o,this.C(this.s),this.g(this.o),this.S(this.o),this.v(),this.p(),this.refresh()},s.prototype.M=function(t){for(var i=0,n=this.t.topSpacing,o=0;o<t.length;o++){var e=t[o],r=h.getComputedBox(e),s=this.l?Math.max(0,i-r.marginTop):i;e.style.position="fixed",e.style.top=n+s+"px",e.style.bottom="",n+=r.height+r.marginTop+s,i=r.marginBottom}},s.prototype.j=function(t){for(var i=0,n=h.getComputedBox(this.t.containerEl).paddingBottom,o=t.length-1;0<=o;o--){var e=t[o],r=h.getComputedBox(e),s=this.l?Math.max(0,i-r.marginBottom):i;e.style.position="absolute",e.style.top="auto",e.style.bottom=n+s+"px",n+=r.height+r.marginBottom+s,i=r.marginTop}},s.prototype.g=function(t){t.forEach(function(t){t.style.position="",t.style.top="",t.style.bottom="",t.style.height="",t.style.width=""})},s.prototype.C=function(t){t.forEach(function(t){t.style.display="none"})},s.prototype.k=function(t){for(var i=0;i<t.length;i++)t[i].style.display=getComputedStyle(this.o[i]).display},s.prototype.S=function(){for(var t=0;t<this.o.length;t++){var i=this.o[t],n=getComputedStyle(i);i.style.width=n.width,i.style.height=n.height}},s.refreshAll=function(){for(var t=0;t<e.length;t++)e[t].refresh()},s.hardRefreshAll=function(){for(var t=0;t<e.length;t++)e[t].hardRefresh()},s.initializeAll=function(t,i,n){if(void 0===t)throw new Error("'target' parameter is undefined");var o=[];t instanceof Element?o=[t]:void 0!==t.length&&0<t.length&&t[0]instanceof Element?o="function"==typeof t.get?t.get():t:"string"==typeof t&&(o=document.querySelectorAll(t)||[]);var e=[],r=[];if(o.forEach(function(t){-1===e.indexOf(t.parentNode)&&(e.push(t.parentNode),r.push(t))}),!n&&!r.length)throw new Error("There are no elements to initialize");return r.map(function(t){return new s(t,i)})},window.addEventListener("scroll",s.refreshAll),window.addEventListener("resize",s.hardRefreshAll);var h={parseNumber:function(t){return parseFloat(t)||0},findElement:function(t,i){return i||(i=document),"string"==typeof t?i.querySelector(t):t instanceof Element?t:void 0},getComputedBox:function(t){var i=t.getBoundingClientRect(),n=getComputedStyle(t);return{height:i.height,width:i.width,top:window.pageYOffset+i.top,bottom:window.pageYOffset+i.bottom,marginTop:h.parseNumber(n.marginTop),marginBottom:h.parseNumber(n.marginBottom),paddingTop:h.parseNumber(n.paddingTop),paddingBottom:h.parseNumber(n.paddingBottom),topWithMargin:window.pageYOffset+i.top-h.parseNumber(n.marginTop),bottomWithMargin:window.pageYOffset+i.bottom+h.parseNumber(n.marginBottom)}}};return s}();var jQueryPlugin=window.$||window.jQuery||window.Zepto;jQueryPlugin&&(jQueryPlugin.fn.sticksy=function(t){return Sticksy.initializeAll(this,t)});