{% load static %}

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock title %}</title>
    <link href="{% static 'img/favicon.ico' %}" rel="shortcut icon" type="image/x-icon">
    <link href="{% static 'css/base.css' %}" rel="stylesheet">
    <link href="{% static 'bootstrap_4.5.0/css/bootstrap.min.css' %}" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'assets/css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/animate.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/sina-nav.css' %}">

    {% block css_file %}
    {% endblock css_file %}

</head>

<body class="starlight">
    <nav class="sina-nav mobile-sidebar navbar-fixed" data-top="0">
        <div class="container">
            <div class="extension-nav">
                <ul>
                    {% if request.user.is_authenticated %} {# 当用户被验证 #}
                    <li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" >
							<img src="{{request.user.profile.photo.url}}" style="width: 2rem;height: 2rem; border-radius:1rem">
						</a>
						<ul class="dropdown-menu shop-menu">
							<li><a href="{% url 'app_user:profile' %}">修改信息</a></li>
                            <li><a href="{% url 'app_user:change_pw' %}">修改密码</a></li>
                            {% if request.user.is_superuser %}
							<li><a href="{% url 'app_admin:index' %}">ADMIN</a></li>
                            <li><a href="/xadmin">XADMIN</a></li>
                            {% endif %}
							<li><a href="{% url 'app_user:logout' %}">退出登陆</a></li>
						</ul>
					</li>
                    <li><a href="{% url 'app_admin:create_blog' %}">新建文章</a></li>
                    {% else %}
                    <li><a href="{% url 'app_user:login' %}">登陆</a></li>
                    <li><a href="{% url 'app_user:register' %}">注册</a></li>
                    {% endif %}
                    <li class="widget-bar-btn">
                        <a href="#">
                            <i class="fa fa-bars"></i>
                        </a>
                    </li>
                </ul>
            </div>
            <div class="sina-nav-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="sina-brand social-on" href="{% url 'app_blog:article_list' %}">
                    <h2>浩瀚星海</h2>
                    <p>Learn more techniques</p>
                </a>
            </div>

            <div class="collapse navbar-collapse" id="navbar-menu">
                <ul class="sina-menu" data-in="fadeInLeft" data-out="fadeInOut">
                    <li class="dropdown">
                        <a href="{% url 'app_blog:article_list' %}" class="dropdown-toggle"
                            data-toggle="dropdown">Blog</a>
                        <ul class="dropdown-menu">
                            <li><a href="{% url 'app_blog:article_list' %}">All</a></li>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Custom Menu</a></li>
                            <li><a href="#">Custom Menu</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown</a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">Custom Menu</a></li>
                                    <li><a href="#">Custom Menu</a></li>
                                    <li><a href="#">Custom Menu</a></li>
                                </ul>
                            </li>
                            <li><a href="#">Custom Menu</a></li>
                        </ul>
                    </li>
                </ul>
                </li>
                <li class="scroll"><a href="{% url 'app_gallery:gallery_list' %}">Gallery</a></li>
                <li class="active scroll"><a href="#about">About</a></li>
                </ul>
            </div>
        </div>

        <div class="widget-bar">
            <a href="#" class="close-widget-bar"><i class="fa fa-times"></i></a>
            <div class="widget">
                <h6 class="title">Custom Pages</h6>
                <ul class="link">
                    <li><a href="#">About</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Portfolio</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
            <div class="widget">
                <h6 class="title">Additional Links</h6>
                <ul class="link">
                    <li><a href="#">Retina Homepage</a></li>
                    <li><a href="#">New Page Examples</a></li>
                    <li><a href="#">Parallax Sections</a></li>
                    <li><a href="#">Shortcode Central</a></li>
                    <li><a href="#">Ultimate Font Collection</a></li>
                </ul>
            </div>
        </div>
    </nav>

    {# 主体 #}
    <div class="container">
        <div class="row">
            <div class="col-6 col-lg-12">
            {{Carlos}}{# 全局tag #}
            {% block content %}
            {% endblock content %}
            </div>
        </div>
    </div>


    {# 底栏 #}
    <footer class="footinfo">
        {% block footer %}
        <div style="text-align: center">
            Copyright©&nbsp;2021&nbsp;
            <a href="/" target="blank">浩瀚星海</a>
            &nbsp;|&nbsp;
            <a href="/sitemap.xml" title="SiteMap" target="_blank">SiteMap</a>
            &nbsp;|&nbsp;
            <a href="{% url 'app_blog:article_feed' %}" title="RSS Feed" target="_blank">订阅博客</a>
        </div>
        <div style="text-align: center">
            Powered by
            <a href="https://www.djangoproject.com/" rel="nofollow" target="_blank">Django</a>
            &nbsp;|&nbsp;
            本页面加载耗时:<!!LOAD_TIMES!!>s
        </div>
        {% endblock footer %}
    </footer>

    {% block css_style %}
    {% endblock css_style %}

    <script src="{% static 'jquery_v3.5.1/jquery-3.5.1.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'bootstrap_4.5.0/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'starlight/starlight.js' %}"></script>
    <script src="{% static 'assets/js/wow.min.js' %}"></script>
    <script src="{% static 'assets/js/sina-nav.js' %}"></script>

    <script>
        $('[data-toggle="tooltip"]').tooltip();// Tooltip

        var rocket = $('#rocket');
        $(window).on('scroll', debounce(slideTopSet, 300));
        function debounce(func, wait) {
            var timeout;
            return function () {
                clearTimeout(timeout);
                timeout = setTimeout(func, wait);
            };
        };
        function slideTopSet() {
            var top = $(document).scrollTop();
            if (top > 200) {
                rocket.addClass('show');
            } else {
                rocket.removeClass('show');
            }
        };
        $(document).on('click', '#rocket', function (event) {
            rocket.addClass('move');
            $('body, html').animate({
                scrollTop: 0
            }, 800);
        });
        $(document).on('animationEnd', function () {
            setTimeout(function () {
                rocket.removeClass('move');
            }, 400);
        });
        $(document).on('webkitAnimationEnd', function () {
            setTimeout(function () {
                rocket.removeClass('move');
            }, 400);
        });




    </script>

    {% block javascript %}
    {% endblock javascript %}


</body>

</html>