{% load static %}

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock title %}</title>
    <link href="{% static 'img/favicon.ico' %}" rel="shortcut icon" type="image/x-icon">
    <link href="{% static 'css/open_font.css' %}" rel='stylesheet' type='text/css'>
    <link href="{% static 'css/base.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'fonts/FontAwesome/font-awesome.css' %}" rel="stylesheet">

    <link href="{% static 'css/animate.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootsnav.css' %}" rel="stylesheet">
    <link href="{% static 'css/overwrite.css' %}" rel="stylesheet">
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <link href="{% static 'skins/color.css' %}" rel="stylesheet">


    {% block css_file %}
    {% endblock css_file %}

</head>

<body class="starlight">
    <!-- 导航栏 -->
    <nav class="navbar navbar-default navbar-fixed white no-background bootsnav">

        <!-- 顶部搜索-->
        <div class="top-search">
            <div class="container">
                <div class="input-group">
                    <span class="input-group-addon"><i class="fa fa-search"></i></span>
                    <input type="text" class="form-control" placeholder="Search">
                    <span class="input-group-addon close-search"><i class="fa fa-times"></i></span>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- 属性导航 -->
            <div class="attr-nav">
                <ul>
                    {% if request.user.is_authenticated %} {# 当用户被验证 #}
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <img src="{{request.user.profile.photo.url}}"
                                style="width: 2rem;height: 2rem; border-radius:1rem">
                            <span class="badge">3</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="{% url 'app_user:profile' %}">修改信息</a></li>
                            <li><a href="{% url 'app_user:change_pw' %}">修改密码</a></li>
                            {% if request.user.is_superuser %}
                            <li><a href="{% url 'app_admin:index' %}">ADMIN</a></li>
                            <li><a href="/xadmin">XADMIN</a></li>
                            {% endif %}
                            <li><a href="{% url 'app_user:logout' %}">退出登陆</a></li>
                        </ul>
                    </li>
                    <li><a href="{% url 'app_admin:create_blog' %}">新建文章</a></li>
                    {% else %}
                    <li><a href="{% url 'app_user:login' %}">登陆</a></li>
                    <li><a href="{% url 'app_user:register' %}">注册</a></li>
                    {% endif %}
                    <!-- 搜索按钮 -->
                    <li class="search"><a href="#"><i class="fa fa-search"></i></a></li>
                    <!-- more info -->
                    <li class="side-menu"><a href="#"><i class="fa fa-bars"></i></a></li>
                </ul>
            </div>

            <!-- logo -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="/" title="浩瀚星海 Carlos">
                    <img src="{% static 'images/brand/logo-white.png' %}" class="logo logo-display" alt="">
                    <img src="{% static 'images/brand/logo-black.png' %}" class="logo logo-scrolled" alt="">
                </a>
            </div>

            <!-- 包括导航链接、表单和其他内容 -->
            <div class="collapse navbar-collapse" id="navbar-menu">
                <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Blog</a>
                        <ul class="dropdown-menu">
                            <li><a href="/">All</a></li>
                            <li><a href="#">分类1</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">分类2</a>
                                <ul class="dropdown-menu">
                                    <li><a href="#">子类1</a></li>
                                    <li><a href="#">子类2</a></li>
                                    <li class="dropdown">
                                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">子类3</a>
                                        <ul class="dropdown-menu">
                                            <li><a href="#">子子类1</a></li>
                                            <li><a href="#">子子类2</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="#">子类4</a></li>
                                </ul>
                            </li>
                            <li><a href="#">分类3</a></li>
                        </ul>
                    </li>
                    <li><a href="{% url 'app_gallery:gallery_list' %}">Gallery</a></li>
                    <li><a href="#">Other</a></li>

                </ul>
            </div>
        </div>

        <!-- 侧边弹出栏 -->
        <div class="side">
            <a href="#" class="close-side"><i class="fa fa-times"></i></a>
            <div class="widget">
                <h6 class="title">Custom Pages</h6>
                <ul class="link">
                    <li><a href="#">About</a></li>
                    <li><a href="#">Services</a></li>
                    <li><a href="#">Blog</a></li>
                    <li><a href="#">Portfolio</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
            <div class="widget">
                <h6 class="title">Additional Links</h6>
                <ul class="link">
                    <li><a href="#">Retina Homepage</a></li>
                    <li><a href="#">New Page Examples</a></li>
                    <li><a href="#">Parallax Sections</a></li>
                    <li><a href="#">Shortcode Central</a></li>
                    <li><a href="#">Ultimate Font Collection</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Start Home -->
    <div class="pageheader fixed-demo dark">
        <div class="container">
            <h2 class="title">浩瀚星海</h2>
            <p>今天是个好日子</p>
        </div>
    </div>

    {# 主体 #}
    <div class="container">
        <div class="row">
            <div class="col-6 col-lg-12">
                {{Carlos}}{# 全局tag #}
                {% block content %}
                {% endblock content %}
            </div>
        </div>
    </div>


    {# 底栏 #}
    <footer class="footinfo">
        {% block footer %}
        <div style="text-align: center">
            Copyright©&nbsp;2021&nbsp;
            <a href="/" target="blank">浩瀚星海</a>
            &nbsp;|&nbsp;
            <a href="/sitemap.xml" title="SiteMap" target="_blank">SiteMap</a>
            &nbsp;|&nbsp;
            <a href="{% url 'app_blog:article_feed' %}" title="RSS Feed" target="_blank">订阅博客</a>
        </div>
        <div style="text-align: center">
            Powered by
            <a href="https://www.djangoproject.com/" rel="nofollow" target="_blank">Django</a>
            &nbsp;|&nbsp;
            本页面加载耗时:<!!LOAD_TIMES!!>s
        </div>
        {% endblock footer %}
    </footer>

    {% block css_style %}
    {% endblock css_style %}

    <script src="{% static 'jquery_v3.5.1/jquery-3.5.1.min.js' %}"></script>
    <script src="{% static 'js/popper.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'starlight/starlight.js' %}"></script>
    <script src="{% static 'js/bootsnav.js' %}"></script>


    <script>
        $('[data-toggle="tooltip"]').tooltip();// Tooltip

        var rocket = $('#rocket');
        $(window).on('scroll', debounce(slideTopSet, 300));
        function debounce(func, wait) {
            var timeout;
            return function () {
                clearTimeout(timeout);
                timeout = setTimeout(func, wait);
            };
        };
        function slideTopSet() {
            var top = $(document).scrollTop();
            if (top > 200) {
                rocket.addClass('show');
            } else {
                rocket.removeClass('show');
            }
        };
        $(document).on('click', '#rocket', function (event) {
            rocket.addClass('move');
            $('body, html').animate({
                scrollTop: 0
            }, 800);
        });
        $(document).on('animationEnd', function () {
            setTimeout(function () {
                rocket.removeClass('move');
            }, 400);
        });
        $(document).on('webkitAnimationEnd', function () {
            setTimeout(function () {
                rocket.removeClass('move');
            }, 400);
        });




    </script>

    {% block javascript %}
    {% endblock javascript %}


</body>

</html>